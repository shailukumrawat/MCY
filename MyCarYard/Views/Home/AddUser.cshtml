@using System.Globalization
@{
    ViewBag.Title = "Add User";
    Layout = "~/Views/Shared/_LayoutSuperAdmin.cshtml";
}

<script>
    var map;
    function mapa()
    {
        var opts = {
            'center': new google.maps.LatLng(22.730590425493833, 75.8770751953125),
            'zoom':11, 'mapTypeId': google.maps.MapTypeId.ROADMAP }
        map = new google.maps.Map(document.getElementById('mapdiv'),opts);
        google.maps.event.addListener(map,'click',function(event)
        {
            //document.getElementById('latlongclicked').value = event.latLng.lat() + ', ' + event.latLng.lng()
            $('#latitute').val(event.latLng.lat())
            $('#longitute').val(event.latLng.lng())
        })

        google.maps.event.addListener(map,'mousemove',function(event)
        {
            //alert("Hi");
            //$('#latitute').val(event.latLng.lat())
            //$('#longitute').val(event.latLng.lng())
           // document.getElementById('latlong').innerHTML = event.latLng.lat() + ', ' + event.latLng.lng()
        });

    }
</script>
<div class="wrapper">
    <div class="content-wrapper">
        <section class="content">
            <!-- SELECT2 EXAMPLE -->
            <div class="box box-default">
                <div class="box-header with-border">
                    <h3 class="box-title">Add New Customer</h3>
                    <div class="box-tools pull-right">
                       @* <button type="button" class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i></button>
    <button type="button" class="btn btn-box-tool" data-widget="remove"><i class="fa fa-remove"></i></button>*@
                    </div>
                </div>
                <!-- /.box-header -->
                <div class="box-body">
                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label>User Type</label>
                                <select class="form-control " style="width: 100%;" id="usertype" onchange="return selectUserType();">
                                    <option value="0">Select UserType</option>
                                    <option value="Paid">Premium Membership</option>
                                    <option value="Free">Normal Membership</option>
                                </select>
                            </div>
                               
                            <div class="form-group" id="plandur">
                                <label> Plan Duration (In Months)</label>
                                <input type="text" class="form-control" style="width: 100%;" id="duration" value="0">
                            </div>

                            <div class="form-group">
                                <label>Registration Date:</label>
                                <div class="input-group date">
                                    <div class="input-group-addon">
                                        <i class="fa fa-calendar"></i>
                                    </div>
                                    <input type="text" class="form-control pull-right" id="datepicker1" value="@DateTime.Now.Date.ToString("MM/dd/yyyy",CultureInfo.InvariantCulture)">
                                </div>
                                <!-- /.input group -->
                            </div>
                            <div class="form-group">
                                <label> Name</label>
                                <input type="text" class="form-control" style="width: 100%;" id="name" >
                            </div>

                            <div class="form-group">
                                <label>Email</label>
                                <input type="text" class="form-control" style="width: 100%;" id="email" >
                                <label id="emailnotify" style="color:red" class="hidden"></label>
                            </div>

                            <div class="form-group">
                                <label> Gender</label>
                                <div class="radio">
                                    <label>
                                        <input type="radio" name="optionsRadios" id="optionsRadios1" value="Male" >
                                        Male
                                    </label>
                                    <label>
                                        <input type="radio" name="optionsRadios" id="optionsRadios1" value="Female" >
                                        Female
                                    </label>
                                </div>
                            </div>
                            <div class="form-group">
                                <label>Country</label>
                                <select class="form-control" style="width: 100%;" id="country" onchange="loadState(); loadCity(); loadRegion(); loadNewRegion();">
                                    <option value="0">Select Country</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>State</label>
                                <select class="form-control" style="width: 100%;" id="state" onchange="loadCity(); loadRegion(); loadNewRegion();">
                                    <option value="0">Select State</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label>City</label>
                                <select class="form-control " style="width: 100%;" id="city" onchange="loadRegion(); loadNewRegion();">
                                    <option value="0">Select City</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Suburb </label>
                                <select class="form-control " style="width: 100%;" id="region" onchange="loadNewRegion();">
                                    <option value="0">Select Suburb</option>
                                </select>
                            </div>
                            <!--
                            <div class="form-group">
                                <label>Suburb</label>
                                <select class="form-control " style="width: 100%;" id="suburb">
                                    <option value="0">Select Suburb</option>
                                </select>

                            </div>
                                -->
                           

                   

                            <div class="form-group">
                                <label>Password</label>
                                <input type="text" class="form-control" style="width: 100%;" id="pass">
                            </div>
                            
                             
                            
                            <!-- /.form-group -->
                        </div>
                        <!-- /.col -->
                        <div class="col-md-6">
                            <div class="form-group" id="selectplan">
                                <label>Assign Plan</label>
                                <select class="form-control" style="width: 100%;" id="plan" onchange="getValidDate();">
                                    <option value="0">Select Plan</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Customer ID</label>
                                <input type="text" class="form-control" style="width: 100%;" id="customerid" placeholder="Customer ID">
                            </div>
                     
                            <div class="form-group">
                                <label>Valid Date:</label>
                                <div class="input-group date">
                                    <div class="input-group-addon">
                                        <i class="fa fa-calendar"></i>
                                    </div>
                                    <input type="text" class="form-control pull-right" id="datepicker" value="@DateTime.Now.Date.ToString("MM/dd/yyyy",CultureInfo.InvariantCulture)" disabled>
                                </div>
                                <!-- /.input group -->
                            </div>
                            <div class="form-group">
                                <label>Business Name</label>
                                <input type="text" class="form-control" style="width: 100%;" id="bname" placeholder="Business Name">
                            </div>
                            <div class="form-group">
                                <label> Contact Number</label>
                                <input type="text" class="form-control" style="width: 100%;" id="cno" >
                            </div>
                           
                          

                            <div class="form-group">
                                <label>ZIP Code</label>
                                <input type="text" class="form-control" style="width: 100%;" id="zipcode" >
                            </div>

                            <div class="form-group">
                                <label>Street</label>
                                <input type="text" class="form-control" style="width: 100%;" id="street">
                            </div>

                            <div class="form-group">
                                <label>Street Name</label>
                                <input type="text" class="form-control" style="width: 100%;" id="streetname">
                            </div>
                            
                                <div class="form-group" id="lattext">
                                    <label>Latitute</label>
                                    <input type="text" class="form-control" style="width: 100%;" id="latitute" >
                                </div>
                            <div class="form-group" id="longtext">
                                <label>Longitute</label>
                                <input type="text" class="form-control" style="width: 100%;" id="longitute">
                            </div>
                            <div class="form-group">
                                <label>Approve</label>
                                <select class="form-control select2" style="width: 100%;" id="apprstatus">
                                    <option value="">Select Status</option>
                                        <option value="1" >Approve</option>
                                            <option value="2">Not Approve</option>
                                    <option value="0">Awaiting Approval</option>
               
                                </select>
                            </div>

                            
                        </div>
                        <div class="col-sm-12">
                        <div class="form-group" id="profilepicture">
                                <form action="AddBusinessLogo" method="post" name="frmlogoupdate" id="frmlogoupdate" enctype="multipart/form-data">
                                <div class="detail_img">
                                    <img  class="img-responsive" id="blah" src="~/Content/images/avtar.png" />
                                    <input type="file" style="width:100%" id="buslogo" name="buslogo" />
                                    <input type="hidden" id="photoupdateid" name="photoupdateid" />
                                </div>
                                </form>
                            </div>
                        </div>
                            <script>

                                function readURL(input)
                                {
                                    if (input.files && input.files[0])
                                    {

                                        var reader = new FileReader();

                                        reader.onload = function (e) {

                                            var fileUpload = $("#buslogo")[0];

                                            var regex = new RegExp("([a-zA-Z0-9\s_\\.\-:])+(.jpg|.jpeg|.png|.gif)$");

                                            if (regex.test(fileUpload.value.toLowerCase())) {

                                                
                                                $('#blah').attr('src', e.target.result);

                                            } else {

                                                lnv.alert({
                                                    title: '',
                                                    content: 'Please select a valid Image ',
                                                    alertBtnText: 'Okay',
                                                    alertHandler: function () {

                                                        $("#buslogo").focus();
                                                    }
                                                });
                                                $('.alert-btn').focus();
                                            }
                                        }

                                        reader.readAsDataURL(input.files[0]);
                                    }
                                }

                                $("#buslogo").change(function () {
                                  
                                    //var fileUpload = $("#buslogo")[0];

                                                    readURL(this);
                                        

                                });
                            </script>
                        <!-- /.col -->
                        
                            <div class="col-md-12" id="mapshow">

                                <div id="mapdiv" style="width:100%;height:400px;"></div>

                                <script async defer
                                        src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCx0DvT12bYe8a4xIw_SivGa2gIoqSYacI&callback=mapa">
                                </script>
                            </div>
                        

                    </div>
                </div>
                <!-- /.row -->
                <div class="row">
                    <div class="col-md-12">

                    </div>
                </div>
            </div>


            <!-- /.box-body -->
            <div class="box-footer">
                <button type="submit" class="btn btn-primary" onclick="return AddCustomer();">Add Customer</button>
            </div>


            <!-- /.box -->
            <!-- /.row -->
        </section>
    </div>
</div>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>



<script>

    $(document).ready(function(){


        $('select').on('change', function() {
            if(this.value != "0" || this.value != "")
                $(this).css('border-color','');
            else
                $(this).css('border-color','red');
        })


        $( "input,textarea" )
      .keyup(function() {
          var value = $( this ).val();
          if(value != "")
              $(this).css('border-color','');
          else
              $(this).css('border-color','red');
      })
        //.keyup();

    });



</script>
<script>
    $(document).ready(function () {
        loadPlan();
    });

    function loadPlan() {
       
        $.ajax({
            type: "GET",
            contentType: "application/json; charset=utf-8",
            //url is the path of our web method (Page name/function name)
            dataType: "json",
            url: '/Home/GetPlan',
            asyn: false,
            cache: false,
            //called on jquery ajax call success
            success: function (result) {
                $('#plan').empty();
                $('#plan').append("<option value='0' selected>Select Plan</option>");
                var j = 1;
                for (var i = 0; i <= result.planlist.length -1; i++) {

          
                        $('#plan').append("<option  value=" + result.planlist[i].plan_id + ">" + result.planlist[i].plan_name + "</option>");
                        //getValidDate();
          

                }
            },
            //called on jquery ajax call failure
            error: function ajaxError(result) {
                alert("Data Not Found");
            }
        });

    }

</script>

<script type="text/javascript">
    $(document).ready(function () {
        loadCountry();
    });

    function loadCountry() {
       
        $.ajax({
            type: "POST",
            contentType: "application/json; charset=utf-8",
            //url is the path of our web method (Page name/function name)
            dataType: "json",
            url: '/Home/GetCountry',
            asyn: false,
            cache: false,
            //called on jquery ajax call success
            success: function (result) {
                $('#country').empty();
                $('#country').append("<option value='0' selected>Select Country</option>");

                for (var i = 0; i <= result.countrylist.length - 1; i++) {
                    //alert("Hello"+result[i]);
                    if (result.countrylist[i].status == 1) {
                        $("#country").append($("<option  ></option>").val(result.countrylist[i].count_id).html(result.countrylist[i].countryname));
                    }
                    
                }
            },
            //called on jquery ajax call failure
            error: function ajaxError(result) {
                // alert("Data Not Found");
            }
        });

    }

</script>


<script type="text/javascript">
    function loadState() {
        var count_id = $('#country option:selected').val();
       
      //alert(count_id);
        $.ajax({
            type: "POST",
            contentType: "application/json; charset=utf-8",
            //url is the path of our web method (Page name/function name)
            dataType: "json",
            data: "{ count_id: '" + $("#country").val() + "' }",
            url: '/Home/GetState',
            asyn: false,
            cache: false,
            //called on jquery ajax call success
            success: function (result) {
                $('#state').empty();
                $('#state').append("<option value='0' selected>Select State</option>");


                for (var i = 0; i <= result.statelist.length-1; i++) {
                    
                    if (result.statelist[i].status == 1){
                        $("#state").append($("<option   value=" + result.statelist[i].state_id + ">" + result.statelist[i].state + "</option>"));
                        // loadCity();
                    }
                    
                }
            },
            //called on jquery ajax call failure
            error: function ajaxError(result) {
                // alert("Data Not Found");
            }
        });

    }

</script>
<script type="text/javascript">
    function loadCity() {
        // var make = $('#make option:selected').val();
       
        //  alert(count_id);
        $.ajax({
            type: "POST",
            contentType: "application/json; charset=utf-8",
            //url is the path of our web method (Page name/function name)
            dataType: "json",
            data: "{ country: '" + $("#country").val() + "',state:'" + $("#state").val() + "' }",
            url: '/Admin/LoadCity',
            asyn: false,
            cache: false,
            //called on jquery ajax call success
            success: function (result) {
                $('#city').empty();

                    $("#city").append($("<option selected>Select City</option>"));

                //$("#city").append($("<option>Select City</option>"));
                    for (var i = 0; i <= result.citylist.length - 1 ; i++) {
                        if (result.citylist[i].status == 1) {

                            $("#city").append($("<option></option>").val(result.citylist[i].city_id).html(result.citylist[i].city));
                            // loadRegion();
                        }
                    }
            },
            //called on jquery ajax call failure
            error: function ajaxError(result) {
                // alert("Data Not Found");
            }
        });
    }
</script>

<script type="text/javascript">
    function loadRegion() {
        // var make = $('#make option:selected').val();
       
        //  alert(count_id);
        $.ajax({
            type: "POST",
            contentType: "application/json; charset=utf-8",
            //url is the path of our web method (Page name/function name)
            dataType: "json",
            data: "{ country: '" + $("#country").val() + "',state:'" + $("#state").val() + "',city: '" + $('#city').val() + "' }",
            url: '/Admin/LoadRegion',
            asyn: false,
            cache: false,
            //called on jquery ajax call success
            success: function (result) {
                $('#region').empty();
          
                    $("#region").append($("<option selected>Select Region</option>"));

                    for (var i = 0; i <= result.regionlist.length - 1 ; i++) {

                        if (result.regionlist[i].status == 1) {

                            $("#region").append($("<option></option>").val(result.regionlist[i].reas_id).html(result.regionlist[i].reason));
                        }
                    }
            },
            //called on jquery ajax call failure
            error: function ajaxError(result) {
                // alert("Data Not Found");
            }
        });
    }
</script>
<script>

    function AddCustomer() {

       var isvalid = true;

        try {
            var custid = $('#customerid').val();
            var customerid = custid;
            var bname = "";
            var latitute = "";
            var longitute = "";
            var plan_id = 0;

            if ($('#usertype').val() == "Paid") {

                bname = $('#bname').val();
                plan_id = $('#plan').val();
                latitute = $('#latitute').val();
                longitute = $('#longitute').val();
                if (bname.trim() == "" || bname == undefined) {

                    /*lnv.alert({
                        title: '',
                        content: 'Please Enter Business Name',
                        alertBtnText: 'Okay',
                        alertHandler: function () {

                            $('#bname').focus();


                        }
                    })*/
                    $('#bname').css('border-color', 'red');
                    isvalid = false;
                } else {
                    $('#bname').css('border-color', '');
                    isvalid = true;
                }
          
                if (plan_id == "" || plan_id == undefined || plan_id == 0) {
                    
                    //lnv.alert({
                    //    title: '',
                    //    content: 'Please Select Plan',
                    //    alertBtnText: 'Okay',
                    //    alertHandler: function () {

                    //        $('#plan').focus();


                    //    }
                    //})
                    $('#plan').css('border-color', 'red');
                    isvalid = false;
                } else {
                    $('#plan').css('border-color', '');
                    isvalid = true;
                }

            }

            var reg_date = $('#datepicker1').val();
            var validdate = $('#datepicker').val();
            var name = $('#name').val();
            var cno = $('#cno').val();
            //alert(cno);
            var email = $('#email').val();
            //alert(email);
            var gender = "";
            if ($('#optionsRadios1:checked').val() == "Male") {
                gender = "M";
            } else if ($('#optionsRadios1:checked').val() == "Female") {
                gender = "F";
            }
            //alert(gender);
            //gender put here
            var state = $('#state').val();
            var country = $('#country').val();
            var city = $('#city').val();
            var region = $('#region').val();
            var zipcode = $('#zipcode').val();
            //var suburb = $('#suburb').val();
            var streetname = $('#streetname').val();
            var street = $('#street').val();
            var pass = $('#pass').val();
            var apprstatus = $('#apprstatus').val();
            
            if (reg_date == "" || reg_date == undefined) {

                $('#datepicker1').css('border-color', 'red');

                /*lnv.alert({
                    title: '',
                    content: 'Please Select Registration Date',
                    alertBtnText: 'Okay',
                    alertHandler: function () {

                        $('#datepicker1').focus();
                   }
                })*/

                isvalid = false;

            } else {

                $('#datepicker1').css('border-color', '');
                isvalid = true;
            }

            if (validdate.trim() == "" || validdate == undefined) {

                /*lnv.alert({
                    title: '',
                    content: 'Please Select valid Date',
                    alertBtnText: 'Okay',
                    alertHandler: function () {
                    $('#datepicker1').focus();
                      }
                })*/
                $('#datepicker').css('border-color', 'red');
                isvalid = false;
            } else {
                $('#datepicker').css('border-color', '');
                isvalid = true;
            }

            if (name.trim() == "" || name == undefined) {

                /*lnv.alert({
                    title: '',
                    content: 'Please Enter Name',
                    alertBtnText: 'Okay',
                    alertHandler: function () {

                        $('#name').focus();


                    }
                })*/
                $('#name').css('border-color', 'red');
                isvalid = false;
            } else {
                $('#name').css('border-color', '');
                isvalid = true;
            }

            if (cno.trim() == "" || cno == undefined) {

                /* lnv.alert({
                     title: '',
                     content: 'Please Enter Contact Numebr',
                     alertBtnText: 'Okay',
                     alertHandler: function () {
 
                         $('#cno').focus();
 
 
                     }
                 })
                 */
                $('#cno').css('border-color', 'red');
                isvalid = false;
            } else {
                $('#cno').css('border-color', '');
                isvalid = true;
            }

            if (email.trim() == "" || email == undefined) {
                /*
                lnv.alert({
                    title: '',
                    content: 'Please Enter Email',
                    alertBtnText: 'Okay',
                    alertHandler: function () {

                        $('#email').focus();


                    }
                })*/
                $('#email').css('border-color', 'red');
                isvalid = false;
            } else {
                $('#email').css('border-color', '');
                isvalid = true;

            }


            if (gender == "" || gender == undefined) {

            /*    lnv.alert({
                    title: '',
                    content: 'Please Select Gender',
                    alertBtnText: 'Okay',
                    alertHandler: function () {

                        


                    }
                })*/

                $('#optionsRadios1').css('border-color', 'red');
                isvalid = false;
            } else {
                $('#optionsRadios1').css('border-color', '');
                isvalid = true;
            }

            if (country == "0" || country == "" || country == undefined) {
                /*
                lnv.alert({
                    title: '',
                    content: 'Please Select Country',
                    alertBtnText: 'Okay',
                    alertHandler: function () {

                        $('#country').focus();


                    }
                })*/
                $('#country').css('border-color', 'red');
                isvalid = false;
            } else {
                $('#country').css('border-color', '');
                isvalid = true;
            }

            if (state == "" || state == "0" || state == undefined) {
                /*
                lnv.alert({
                    title: '',
                    content: 'Please Select State',
                    alertBtnText: 'Okay',
                    alertHandler: function () {
             
                        $('#state').focus();
                    }
                })*/
                $('#state').css('border-color', 'red');
                isvalid = false;
            } else {
                $('#state').css('border-color', '');
                isvalid = true;
            }

            if (city == "" || city == "0" || city == undefined) {
                /*
                lnv.alert({
                    title: '',
                    content: 'Please Select City',
                    alertBtnText: 'Okay',
                    alertHandler: function () {

                        $('#city').focus();
                    }
                })
                */
                $('#city').css('border-color', 'red');
                isvalid = false;
            }
                /*else if (suburb == "" || suburb == "0" || suburb == undefined) {
    
                    lnv.alert({
                        title: '',
                        content: 'Please Select Suburb',
                        alertBtnText: 'Okay',
                        alertHandler: function () {
    
                            $('#suburb').focus();
                        }
                    })
    
                    isvalid = false;
                }*/

            else {
                $('#city').css('border-color', '');
                isvalid = true;
            }

            if (region == "" || region == "0" || region == undefined) {

                /*
                lnv.alert({
                    title: '',
                    content: 'Please Select Suburb',
                    alertBtnText: 'Okay',
                    alertHandler: function () {

                        $('#region').focus();
                    }
                })*/
                $('#region').css('border-color', 'red');
                isvalid = false;
            } else {
                $('#region').css('border-color', '');
                isvalid = true;

            }
            if (zipcode.trim() == "" || zipcode == undefined) {

                /*
                lnv.alert({
                    title: '',
                    content: 'Please Enter ZIP Code',
                    alertBtnText: 'Okay',
                    alertHandler: function () {

                        $('#zipcode').focus();
                    }
                })*/
                $('#zipcode').css('border-color', 'red');
                isvalid = false;
            } else {
                $('#zipcode').css('border-color', '');
                isvalid = true;
            }

            if (streetname.trim() == "" || streetname == undefined) {
                /*
                lnv.alert({
                    title: '',
                    content: 'Please Enter Street Name',
                    alertBtnText: 'Okay',
                    alertHandler: function () {

                        $('#streetname').focus();
                    }
                })*/
                $('#streetname').css('border-color', 'red');
                isvalid = false;
            } else {
                $('#streetname').css('border-color', '');
                isvalid = true;
            }

            if (street.trim() == "" || street == undefined) {
                /*
                lnv.alert({
                    title: '',
                    content: 'Please Enter Street',
                    alertBtnText: 'Okay',
                    alertHandler: function () {

                        $('#street').focus();
                    }
                })
                */
                $('#street').css('border-color', 'red');
                isvalid = false;
            } else {
                $('#street').css('border-color', '');
                isvalid = true;

            } 
            if (apprstatus == "" || apprstatus == undefined) {
                /*
                lnv.alert({
                    title: '',
                    content: 'Please Select Approve Status',
                    alertBtnText: 'Okay',
                    alertHandler: function () {

                        $('#apprstatus').focus();
                    }
                })*/
                $('#apprstatus').css('border-color', 'red');

                isvalid = false;

            } else {
                $('#apprstatus').css('border-color', '');
                isvalid = true;
            }

            if ($('#pass').val().trim() == "") {
                $('#pass').css('border-color', 'red');

                isvalid = false;

            } else {
                $('#pass').css('border-color', '');
                isvalid = true;
            }



            $.ajax({
                type: "POST",
                contentType: "application/json; charset=utf-8",
                //url is the path of our web method (Page name/function name)
                dataType: "json",
                data: "{ unm: '" + email.replace(/ /g,'') + "' }",
                url: '/Admin/checkregemail',
                asyn: false,
                cache: false,
                //called on jquery ajax call success
                success: function (result) {

                    if (result.status == "Success") {
                        //$('#registration_modal').modal('hide');
                        //$('#usertyperadio').html("");

                        var regex = /^[a-z0-9\.\_%+-]+@@[a-z0-9\.\-]+\.[a-z]{2,4}$/i;

                        if (email.search(regex)) {
                           
                            $('#emailnotify').html("Please Enter Valid Email Id");
                            isvalid = false;
                        } else {

                            $('#emailnotify').addClass('hidden');

                            $('#emailnotify').html("");
                            isvalid = true;

                        }


                        //isvalid = true;

                        if (isvalid == true) {
                            var obj = { "cust_id": custid, "plan_id": plan_id, "regdate": reg_date, "validdate": validdate, "name": name, "cno": cno, "email": email.replace(/ /g,''), "gender": gender, "country": country, "state": state, "city": city, "region": region, "zipcode": zipcode, "streetname": streetname, "street": street, "pass": pass, "lat": latitute, "longi": longitute, "apprstatus": apprstatus, "customerid": customerid, "bname": bname, "ctype": $('#usertype').val() };
                            $.ajax({
                                type: "POST",
                                contentType: "application/json; charset=utf-8",
                                //url is the path of our web method (Page name/function name)
                                dataType: "json",
                                data: JSON.stringify(obj),
                                url: '/Admin/AddCustomer',
                                asyn: false,
                                cache: false,
                                //called on jquery ajax call success
                                success: function (result) {

                                    var custid = result.custid;
                                    $('#photoupdateid').val(custid);

                                    if (result.status == "1") {
                                        lnv.alert({
                                            title: ' ',
                                            content: 'Customer Successfully Added',
                                            alertBtnText: 'Okay',
                                            alertHandler: function () {

                                                $('#frmlogoupdate').submit();
                                                //var url = '@Url.Action("UserList", "Home")';
                                                //window.location = url;
                                            }
                                        });
                                        $('.alert-btn').focus();
                                    } else {

                                        lnv.alert({
                                            title: ' ',
                                            content: result.status,
                                            alertBtnText: 'Okay',
                                            alertHandler: function () {

                                            }
                                        });
                                        $('.alert-btn').focus();
                                    }
                                },
                                //called on jquery ajax call failure
                                error: function ajaxError(result) {
                                    // alert("Data Not Found");
                                }
                            });

                        } else {

                            lnv.alert({
                                title: ' ',
                                content: 'Please fill all missing fields',
                                alertBtnText: 'Okay',
                                alertHandler: function () {

                                }
                            });
                            $('.alert-btn').focus();

                        }


                    } else {
                        // $('#usertyperadio').html(result.status);
                        isvalid = false;
                        $('#emailnotify').removeClass('hidden');
                        $('#emailnotify').html("This Email is already Exist");

                    }
                },
                //called on jquery ajax call failure
                error: function ajaxError(result) {
                    // alert("Data Not Found");
                }
            });




        } catch (e) {

            isvalid = false;
        }

        return isvalid;


    }
</script>
<script>

    function getValidDate() {

        var plan_id = $('#plan').val();
        //alert(plan_id);

        $.ajax({
            type: "POST",
            contentType: "application/json; charset=utf-8",
            //url is the path of our web method (Page name/function name)
            dataType: "json",
            data: "{ plan_id: '" + plan_id + "' }",
            url: '/Home/GetPlanById',
            asyn: false,
            cache: false,
            //called on jquery ajax call success
            success: function (result) {

                for (var i = 0 ; i <= result.planlist.length -1 ; i++) {
                    $('#duration').val(result.planlist[i].duration);
                    var duration = result.planlist[i].duration;
                    var jan312009 = new Date($('#datepicker1').val());
                    //alert(jan312009);
                    var eightMonthsFromJan312009 = new Date(new Date(jan312009).setMonth(jan312009.getMonth() + duration));
                    //alert(eightMonthsFromJan312009);
                    var validdate = (eightMonthsFromJan312009.getMonth() + 1) + '/' + eightMonthsFromJan312009.getDate() + '/' + eightMonthsFromJan312009.getFullYear();
                    $('#datepicker').val(validdate);
                    //alert(result.planlist[i].duration);
                }

            },
            //called on jquery ajax call failure
            error: function ajaxError(result) {
                // alert("Data Not Found");
            }
        });

    }

</script>

<script type="text/javascript">
    function loadNewRegion() {
       // var make = $('#make option:selected').val();
        //  alert(count_id);
      
        //alert(regionid);
        $.ajax({
            type: "POST",
            contentType: "application/json; charset=utf-8",
            //url is the path of our web method (Page name/function name)
            dataType: "json",
            data: "{ country: '" + $("#country").val() + "',state:'" + $("#state").val() + "',city: '" + $('#city').val() + "',region: '"+ $('#region').val() +"' }",
            url: '/Admin/LoadNewRegion',
            asyn: false,
            cache: false,
            //called on jquery ajax call success
            success: function (result) {

                $('#suburb').empty();
                $("#suburb").append($("<option selected>Select Suburb</option>"));

                for (var i = 0; i <= result.newregionlist.length - 1 ; i++) {

                    if (result.newregionlist[i].status == 1) {
                        $("#suburb").append($("<option ></option>").val(result.newregionlist[i].regionid).html(result.newregionlist[i].regionname));
                    }
                }


            },
            //called on jquery ajax call failure
            error: function ajaxError(result) {
                $('#suburb').empty();
                $("#suburb").append($("<option>Select Suburb</option>"));

            }
        });
    }
</script>


<script >

    function selectUserType() {

        var usertype = $('#usertype').val();
        
        if (usertype == "Paid") {

            $('#plandur').show();
            $('#selectplan').show();
            $('#lattext').show();
            $('#longtext').show();
            $('#mapshow').show();
            $('#profilepicture').show();

        } else {

            $('#plandur').hide();
            $('#selectplan').hide();
            $('#lattext').hide();
            $('#longtext').hide();
            $('#mapshow').hide();
            $('#profilepicture').hide();

        }
    }

</script>